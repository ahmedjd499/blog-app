<div class="min-h-screen bg-gradient-to-br from-purple-50 to-indigo-100 py-12">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    
    <div class="mb-8">
      <h1 class="text-4xl font-extrabold text-gray-900">
        {{ isEditMode ? 'Edit Article' : 'Create New Article' }}
      </h1>
      <p class="text-gray-600 mt-2">Share your thoughts with the community</p>
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="flex justify-center items-center py-20">
      <div class="animate-spin rounded-full h-16 w-16 border-b-4 border-purple-600"></div>
    </div>

    <!-- Error -->
    <div *ngIf="error" class="bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg mb-8">
      {{ error }}
    </div>

    <!-- Form -->
    <form *ngIf="!loading" [formGroup]="articleForm" (ngSubmit)="onSubmit()" class="bg-white rounded-xl shadow-lg p-8">
      
      <!-- Title -->
      <div class="mb-6">
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Title <span class="text-red-500">*</span>
        </label>
        <input
          type="text"
          formControlName="title"
          placeholder="Enter article title..."
          class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
          [class.border-red-500]="title?.invalid && title?.touched"
        />
        <div *ngIf="title?.invalid && title?.touched" class="text-red-500 text-sm mt-1">
          <span *ngIf="title?.errors?.['required']">Title is required</span>
          <span *ngIf="title?.errors?.['minlength']">Title must be at least 5 characters</span>
        </div>
      </div>

      <!-- Content -->
      <div class="mb-6">
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Content <span class="text-red-500">*</span>
        </label>
        <quill-editor
          formControlName="content"
          [modules]="quillModules"
          [style]="{'height': '400px'}"
          [placeholder]="'Write your article content...'"
          [class.border-red-500]="content?.invalid && content?.touched"
        ></quill-editor>
        <div *ngIf="content?.invalid && content?.touched" class="text-red-500 text-sm mt-1">
          <span *ngIf="content?.errors?.['required']">Content is required</span>
          <span *ngIf="content?.errors?.['minlength']">Content must be at least 50 characters</span>
        </div>
      </div>

      <!-- Image Upload -->
      <div class="mb-6">
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Featured Image
        </label>
        
        <!-- Current or Preview Image -->
        <div *ngIf="imagePreview || currentImageUrl" class="mb-4 relative">
          <img 
            [src]="imagePreview || currentImageUrl" 
            alt="Preview"
            class="w-full h-64 object-cover rounded-lg"
          />
          <button
            type="button"
            (click)="removeImage()"
            class="absolute top-2 right-2 bg-red-600 text-white p-2 rounded-lg hover:bg-red-700 transition"
          >
            Remove
          </button>
        </div>

        <!-- Upload Input -->
        <div *ngIf="!imagePreview && !currentImageUrl" class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
          <input
            type="file"
            accept="image/*"
            (change)="onImageSelected($event)"
            class="hidden"
            #fileInput
          />
          <button
            type="button"
            (click)="fileInput.click()"
            class="px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition"
          >
            Choose Image
          </button>
          <p class="text-gray-500 text-sm mt-2">PNG, JPG, JPEG up to 5MB</p>
        </div>
      </div>

      <!-- Tags -->
      <div class="mb-6">
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Tags
        </label>
        
        <!-- Tag Input -->
        <div class="flex gap-2 mb-3">
          <input
            type="text"
            [(ngModel)]="tagInput"
            [ngModelOptions]="{standalone: true}"
            (keyup.enter)="addTag()"
            placeholder="Add a tag..."
            class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
          />
          <button
            type="button"
            (click)="addTag()"
            class="px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition"
          >
            Add
          </button>
        </div>

        <!-- Tags List -->
        <div class="flex flex-wrap gap-2">
          <span
            *ngFor="let tag of tags"
            class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm flex items-center gap-2"
          >
            {{ tag }}
            <button
              type="button"
              (click)="removeTag(tag)"
              class="text-purple-900 hover:text-purple-700"
            >
              
            </button>
          </span>
        </div>
        <p *ngIf="tags.length === 0" class="text-gray-500 text-sm mt-2">
          No tags added yet
        </p>
      </div>

      <!-- Submit Buttons -->
      <div class="flex justify-end gap-4 pt-6 border-t border-gray-200">
        <button
          type="button"
          (click)="router.navigate(['/articles'])"
          class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition"
        >
          Cancel
        </button>
        <button
          type="submit"
          [disabled]="articleForm.invalid || submitting"
          class="px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed"
        >
          {{ submitting ? 'Saving...' : (isEditMode ? 'Update Article' : 'Publish Article') }}
        </button>
      </div>

    </form>

  </div>
</div>
